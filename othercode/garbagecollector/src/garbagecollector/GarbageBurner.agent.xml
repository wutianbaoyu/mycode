<?xml version="1.0" encoding="UTF-8"?>
<!--
  <H3>Garbage burner agent.</H3>

  Sits at a fixed posistion and waits for garbage.
  If garbage occurs it tries to pick it up and burns it.
-->
<agent xmlns="http://www.activecomponents.org/jadex-bdi"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.activecomponents.org/jadex-bdi
	                    http://www.activecomponents.org/jadex-bdi-${jadex_build_version}.xsd"
	name="GarbageBurner"
	package="garbagecollector">

	<imports>
		<import>jadex.commons.future.*</import>
		<import>jadex.base.contextservice.*</import>
		<import>jadex.base.appdescriptor.*</import>
		<import>jadex.extension.envsupport.environment.space2d.*</import>
		<import>jadex.extension.envsupport.environment.*</import>
		<import>jadex.extension.envsupport.math.*</import>
		<import>jadex.bridge.IContextService</import>
		<import>java.util.Arrays</import>
	</imports>

	<beliefs>
		<!-- Environment. -->
		<belief name="env" class="Grid2D">
 			<fact>jadex.application.EnvironmentService.getSpace($component, "mygc2dspace").get()</fact>
 		</belief>
 		
 		<!-- Myself. -->
 		<belief name="myself" class="ISpaceObject">
 			<fact>$beliefbase.env.getAvatar($scope.getComponentDescription(), $scope.getAgentModel().getFullName())</fact>
 		</belief>

		<!-- The actual position on the grid world. 
		格子中的确切位置-->
		<belief name="pos" class="IVector2" evaluationmode="push">
			<fact>
				$beliefbase.myself.position
			</fact>
 		</belief>
		
		<!-- The garbages at the current position. 
		确切位置的垃圾-->
		<beliefset name="garbages" class="ISpaceObject"/>
	</beliefs>

	<goals>
		<!-- The burn waste goal. For every garbage occurring at
			its position a new goal is craeted (see binding).
 			The unique tag avoids creating more than one goal
 			per specific piece of garbage. 
 			燃烧垃圾的目标，每个垃圾出现在它的位置时会创建一个新的目标。这个独特的标志在每块垃圾中
 			不会再创造一个以上的目标，即每块垃圾只创造一个burn目标-->
		<achievegoal name="burn">
   			<parameter name="garbage" class="ISpaceObject">
   				<bindingoptions>
				    $beliefbase.garbages
				</bindingoptions>
			</parameter>
			<unique/>
			<creationcondition>
			    $beliefbase.garbages.length>0
			</creationcondition>
			<!-- <deliberation cardinality="1"/> -->
			<deliberation cardinalityone="true"/>
		</achievegoal>

		<!-- The goal for picking up waste. Tries endlessly to pick up. 
		捡垃圾的目标，不停尝试去捡-->
		<achievegoal name="pick" exclude="never"/>
	</goals>

	<plans>
		<!-- Plan for burning garbage. 
		燃烧垃圾的计划-->
		<plan name="burn_plan">
			<body class="BurnPlanEnv"/>
			<trigger>
				<goal ref="burn"/>
			</trigger>
		</plan>

		<!-- Plan for trying to pick up waste.
		捡起垃圾的计划 -->
		
		<plan name="pickup_plan">
			<body class="PickUpPlanEnv"/>
			<trigger>
				<goal ref="pick"/>
			</trigger>
		</plan>
	</plans>

	<properties>
		<property name="debugging">false</property>
    </properties>

</agent>